% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evca.R
\name{compute_evca}
\alias{compute_evca}
\title{Expected Value of Eliminating Causal Ambiguity (EVECA)}
\usage{
compute_evca(model_utilities, model_probs, utility_function = identity)
}
\arguments{
\item{model_utilities}{Matrix where rows are decisions and columns are models,
containing expected utilities for each decision under each model.
Can also be a data frame that can be coerced to matrix.}

\item{model_probs}{Numeric vector of posterior probabilities for each model.
Must sum to 1 (within floating point tolerance).}

\item{utility_function}{Function to apply to outcomes (default: identity).
If provided, will be applied to \code{model_utilities} assuming they represent
outcomes rather than utilities.}
}
\value{
A list with the following components:
\item{bma_expected_utility}{Numeric vector of BMA expected utility for each decision.}
\item{optimal_decision_bma}{Integer index of optimal decision under BMA.}
\item{optimal_utility_bma}{Expected utility of optimal BMA decision.}
\item{optimal_decisions_per_model}{Integer vector of optimal decision under each model.}
\item{optimal_utilities_per_model}{Numeric vector of expected utility of optimal decision under each model.}
\item{perfect_info_expected_utility}{Expected utility with perfect information about which model is true.}
\item{evca}{Expected Value of Eliminating Causal Ambiguity.}
\item{model_probs}{Original model probabilities (for reference).}
\item{n_decisions}{Number of decision alternatives.}
\item{n_models}{Number of competing causal models.}
}
\description{
Main function for computing the Expected Value of Eliminating Causal Ambiguity
using Bayesian model averaging framework.
}
\examples{
# Example with 3 decisions and 4 competing causal models
model_utilities <- matrix(
  c(
    10, 8, 12, 9,
    7, 9, 6, 8,
    11, 10, 8, 10
  ),
  nrow = 3, ncol = 4,
  dimnames = list(
    paste("Decision", 1:3),
    paste("Model", 1:4)
  )
)

# Model probabilities from expert elicitation or data
model_probs <- c(0.3, 0.25, 0.25, 0.2)

# Compute EVECA with risk-neutral utility (identity function)
result <- compute_evca(model_utilities, model_probs)

# Print key results
result$evca
result$optimal_decision_bma

# Compute EVECA with risk-averse utility
result_risk <- compute_evca(
  model_utilities,
  model_probs,
  utility_function = function(x) -exp(-0.1 * x)
)

# Compare results
c(risk_neutral = result$evca, risk_averse = result_risk$evca)
}
